!function(e){var t={};function n(l){if(t[l])return t[l].exports;var c=t[l]={i:l,l:!1,exports:{}};return e[l].call(c.exports,c,c.exports,n),c.l=!0,c.exports}n.m=e,n.c=t,n.d=function(e,t,l){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(n.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var c in e)n.d(l,c,function(t){return e[t]}.bind(null,c));return l},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,1,0,0,0,1,0,1,1,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];const c=30,r=40,i=20,o={INIT:0,PAUSED:1,STARTED:2};let s=new Image;s.src="tree.png";class a{constructor(){this.liveCellCount=0,this.cells=l.splice(0);for(let e=0;e<this.cells.length;e++)1===this.cells[e]&&this.liveCellCount++}click(e,t){const n=t*r+e;0===this.cells[n]?(this.cells[n]=1,this.liveCellCount++):(this.cells[n]=0,this.liveCellCount--),u.clearRect(0,0,u.canvas.width,u.canvas.height),this.draw()}clear(){this.liveCellCount=0;for(let e=0;e<this.cells.length;e++)this.cells[e]=0;u.clearRect(0,0,u.canvas.width,u.canvas.height)}countSurrounded(e){const t=e%r,n=Math.floor(e/r);let l=0;for(let e=t-1;e<=t+1;e++)if(!(e<0||e>r-1))for(let c=n-1;c<=n+1;c++){if(c<0||c>i-1)continue;if(e===t&&c===n)continue;const o=c*r+e;1===this.cells[o]&&l++}return l}update(){const e=[];let t;for(let n=0;n<this.cells.length;n++)t=this.countSurrounded(n),0===this.cells[n]?3===t&&(e.push({index:n,state:1}),this.liveCellCount++):(t<2||t>3)&&(e.push({index:n,state:0}),this.liveCellCount--);return e.forEach(e=>{this.cells[e.index]=e.state}),!1}draw(){let e,t;u.save(),u.fillStyle="#cccccc",this.cells.forEach((n,l)=>{1===n&&(e=l%r,t=Math.floor(l/r),u.drawImage(s,e*c,t*c,c,c))}),u.restore()}}const u=document.querySelector("#cvs").getContext("2d"),d=document.querySelector("#background-cvs").getContext("2d");let f;u.canvas.width=d.canvas.width=c*r,u.canvas.height=d.canvas.height=c*i,function(){d.save(),d.fillStyle="#bbbbbb";for(let e=1;e<i;e++)d.fillRect(0,e*c,d.canvas.width,1);for(let e=1;e<r;e++)d.fillRect(e*c,0,1,d.canvas.height);d.restore()}(),s.addEventListener("load",(function(){f=new a,f.draw(),h.push(f)}));let h=[],v=null,b=o.INIT;function p(){b=o.INIT,f.clear(),window.clearInterval(v),T()}function g(){for(let e=0;e<h.length;e++)h[e].update()&&(drawable.splice(e,1),e--);u.clearRect(0,0,u.canvas.width,u.canvas.height);for(let e=0;e<h.length;e++)h[e].draw();0===f.liveCellCount&&p()}const S=document.querySelector("#start-btn");S.addEventListener("click",(function(){b!==o.STARTED&&(b=o.STARTED,v=window.setInterval(g,75),T())}));const w=document.querySelector("#next-btn");w.addEventListener("click",(function(){g()}));const y=document.querySelector("#pause-btn");y.addEventListener("click",(function(){b===o.STARTED&&(b=o.PAUSED,window.clearInterval(v),T())}));const C=document.querySelector("#clear-btn");function T(){switch(b){case o.INIT:case o.PAUSED:S.disabled=!1,w.disabled=!1,y.disabled=!0,C.disabled=!1,d.canvas.style.cursor="default";break;case o.STARTED:S.disabled=!0,w.disabled=!0,y.disabled=!1,C.disabled=!1,d.canvas.style.cursor="not-allowed"}}C.addEventListener("click",p),T(),d.canvas.addEventListener("click",(function(e){if(b===o.STARTED)return;const t=u.canvas.getBoundingClientRect(),n=Math.floor((e.clientX-t.left-1)/c),l=Math.floor((e.clientY-t.top-1)/c);f.click(n,l)}))}]);